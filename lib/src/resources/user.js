"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OpenSearchUser = void 0;
const constructs_1 = require("constructs");
const common_1 = require("./common");
const custom_resource_1 = require("../custom-resource");
class OpenSearchUser extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        const { userName, payload, ...other } = props;
        // we won't convert casing for attributes
        const exclude = { attributes: true };
        const resource = new custom_resource_1.OpenSearchCustomResource(this, 'Resource', {
            ...other,
            restEndpoint: `_plugins/_security/api/internalusers/${userName}`,
            payloadJson: JSON.stringify((0, common_1.recursiveFromCamelToSnake)(payload, exclude)),
        });
        this.userName = resource.getStringAfterResourceCreation(userName);
    }
}
exports.OpenSearchUser = OpenSearchUser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvdXNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQ0FBdUM7QUFDdkMscUNBQXdFO0FBQ3hFLHdEQUE4RDtBQXNCOUQsTUFBYSxjQUFlLFNBQVEsc0JBQVM7SUFNM0MsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUEwQjtRQUNsRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWpCLE1BQU0sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBRTlDLHlDQUF5QztRQUN6QyxNQUFNLE9BQU8sR0FBRyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQVcsQ0FBQztRQUU5QyxNQUFNLFFBQVEsR0FBRyxJQUFJLDBDQUF3QixDQUFDLElBQUksRUFBRSxVQUFVLEVBQUU7WUFDOUQsR0FBRyxLQUFLO1lBQ1IsWUFBWSxFQUFFLHdDQUF3QyxRQUFRLEVBQUU7WUFDaEUsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBQSxrQ0FBeUIsRUFBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDekUsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsOEJBQThCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDcEUsQ0FBQztDQUNGO0FBdEJELHdDQXNCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuaW1wb3J0IHsgUmVzb3VyY2VQcm9wc0Jhc2UsIHJlY3Vyc2l2ZUZyb21DYW1lbFRvU25ha2UgfSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQgeyBPcGVuU2VhcmNoQ3VzdG9tUmVzb3VyY2UgfSBmcm9tICcuLi9jdXN0b20tcmVzb3VyY2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5TZWFyY2hVc2VyUHJvcHMgZXh0ZW5kcyBSZXNvdXJjZVByb3BzQmFzZSB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIHVzZXIuXG4gICAqL1xuICByZWFkb25seSB1c2VyTmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBTZWUgaHR0cHM6Ly9vcGVuc2VhcmNoLm9yZy9kb2NzL2xhdGVzdC9zZWN1cml0eS9hY2Nlc3MtY29udHJvbC9hcGkvI2NyZWF0ZS11c2VyIGZvciB0aGUgZGV0YWlscy5cbiAgICovXG4gIHJlYWRvbmx5IHBheWxvYWQ6IFVzZXJQYXlsb2FkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQYXlsb2FkIHtcbiAgcmVhZG9ubHkgcGFzc3dvcmQ/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGhhc2g/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IG9wZW5kaXN0cm9TZWN1cml0eVJvbGVzPzogc3RyaW5nW107XG4gIHJlYWRvbmx5IGJhY2tlbmRSb2xlcz86IHN0cmluZ1tdO1xuICByZWFkb25seSBhdHRyaWJ1dGVzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGNsYXNzIE9wZW5TZWFyY2hVc2VyIGV4dGVuZHMgQ29uc3RydWN0IHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoaXMgdXNlci5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSB1c2VyTmFtZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBPcGVuU2VhcmNoVXNlclByb3BzKSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkKTtcblxuICAgIGNvbnN0IHsgdXNlck5hbWUsIHBheWxvYWQsIC4uLm90aGVyIH0gPSBwcm9wcztcblxuICAgIC8vIHdlIHdvbid0IGNvbnZlcnQgY2FzaW5nIGZvciBhdHRyaWJ1dGVzXG4gICAgY29uc3QgZXhjbHVkZSA9IHsgYXR0cmlidXRlczogdHJ1ZSB9IGFzIGNvbnN0O1xuXG4gICAgY29uc3QgcmVzb3VyY2UgPSBuZXcgT3BlblNlYXJjaEN1c3RvbVJlc291cmNlKHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIC4uLm90aGVyLFxuICAgICAgcmVzdEVuZHBvaW50OiBgX3BsdWdpbnMvX3NlY3VyaXR5L2FwaS9pbnRlcm5hbHVzZXJzLyR7dXNlck5hbWV9YCxcbiAgICAgIHBheWxvYWRKc29uOiBKU09OLnN0cmluZ2lmeShyZWN1cnNpdmVGcm9tQ2FtZWxUb1NuYWtlKHBheWxvYWQsIGV4Y2x1ZGUpKSxcbiAgICB9KTtcblxuICAgIHRoaXMudXNlck5hbWUgPSByZXNvdXJjZS5nZXRTdHJpbmdBZnRlclJlc291cmNlQ3JlYXRpb24odXNlck5hbWUpO1xuICB9XG59XG4iXX0=