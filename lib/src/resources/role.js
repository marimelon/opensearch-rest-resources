"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OpenSearchRole = void 0;
const constructs_1 = require("constructs");
const common_1 = require("./common");
const custom_resource_1 = require("../custom-resource");
class OpenSearchRole extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        const { roleName, payload, ...other } = props;
        const resource = new custom_resource_1.OpenSearchCustomResource(this, 'Resource', {
            ...other,
            restEndpoint: `_plugins/_security/api/roles/${roleName}`,
            payloadJson: JSON.stringify((0, common_1.recursiveFromCamelToSnake)(payload)),
        });
        this.roleName = resource.getStringAfterResourceCreation(roleName);
    }
}
exports.OpenSearchRole = OpenSearchRole;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9sZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvcm9sZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQ0FBdUM7QUFDdkMscUNBQXdFO0FBQ3hFLHdEQUE4RDtBQW9DOUQsTUFBYSxjQUFlLFNBQVEsc0JBQVM7SUFNM0MsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUEwQjtRQUNsRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWpCLE1BQU0sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBRTlDLE1BQU0sUUFBUSxHQUFHLElBQUksMENBQXdCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtZQUM5RCxHQUFHLEtBQUs7WUFDUixZQUFZLEVBQUUsZ0NBQWdDLFFBQVEsRUFBRTtZQUN4RCxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFBLGtDQUF5QixFQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ2hFLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLDhCQUE4QixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7Q0FDRjtBQW5CRCx3Q0FtQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IFJlc291cmNlUHJvcHNCYXNlLCByZWN1cnNpdmVGcm9tQ2FtZWxUb1NuYWtlIH0gZnJvbSAnLi9jb21tb24nO1xuaW1wb3J0IHsgT3BlblNlYXJjaEN1c3RvbVJlc291cmNlIH0gZnJvbSAnLi4vY3VzdG9tLXJlc291cmNlJztcblxuZXhwb3J0IGludGVyZmFjZSBPcGVuU2VhcmNoUm9sZVByb3BzIGV4dGVuZHMgUmVzb3VyY2VQcm9wc0Jhc2Uge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyByb2xlLlxuICAgKi9cbiAgcmVhZG9ubHkgcm9sZU5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogU2VlIGh0dHBzOi8vb3BlbnNlYXJjaC5vcmcvZG9jcy9sYXRlc3Qvc2VjdXJpdHkvYWNjZXNzLWNvbnRyb2wvYXBpLyNjcmVhdGUtcm9sZSBmb3IgdGhlIGRldGFpbHMuXG4gICAqL1xuICByZWFkb25seSBwYXlsb2FkOiBSb2xlUGF5bG9hZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb2xlUGF5bG9hZCB7XG4gIHJlYWRvbmx5IGNsdXN0ZXJQZXJtaXNzaW9ucz86IHN0cmluZ1tdO1xuICByZWFkb25seSBpbmRleFBlcm1pc3Npb25zPzogSW5kZXhQZXJtaXNzaW9uc1tdO1xuICByZWFkb25seSB0ZW5hbnRQZXJtaXNzaW9ucz86IFRlbmFudFBlcm1pc3Npb25zW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5kZXhQZXJtaXNzaW9ucyB7XG4gIHJlYWRvbmx5IGluZGV4UGF0dGVybnM/OiBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgZGxzPzogc3RyaW5nO1xuICByZWFkb25seSBmbHM/OiBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgbWFza2VkRmllbGRzPzogc3RyaW5nW107XG4gIC8qKlxuICAgKiBodHRwczovL29wZW5zZWFyY2gub3JnL2RvY3MvbGF0ZXN0L3NlY3VyaXR5L2FjY2Vzcy1jb250cm9sL2RlZmF1bHQtYWN0aW9uLWdyb3Vwcy9cbiAgICovXG4gIHJlYWRvbmx5IGFsbG93ZWRBY3Rpb25zPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVuYW50UGVybWlzc2lvbnMge1xuICByZWFkb25seSB0ZW5hbnRQYXR0ZXJucz86IHN0cmluZ1tdO1xuICByZWFkb25seSBhbGxvd2VkQWN0aW9ucz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgT3BlblNlYXJjaFJvbGUgZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyByb2xlLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHJvbGVOYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IE9wZW5TZWFyY2hSb2xlUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgY29uc3QgeyByb2xlTmFtZSwgcGF5bG9hZCwgLi4ub3RoZXIgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgcmVzb3VyY2UgPSBuZXcgT3BlblNlYXJjaEN1c3RvbVJlc291cmNlKHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgIC4uLm90aGVyLFxuICAgICAgcmVzdEVuZHBvaW50OiBgX3BsdWdpbnMvX3NlY3VyaXR5L2FwaS9yb2xlcy8ke3JvbGVOYW1lfWAsXG4gICAgICBwYXlsb2FkSnNvbjogSlNPTi5zdHJpbmdpZnkocmVjdXJzaXZlRnJvbUNhbWVsVG9TbmFrZShwYXlsb2FkKSksXG4gICAgfSk7XG5cbiAgICB0aGlzLnJvbGVOYW1lID0gcmVzb3VyY2UuZ2V0U3RyaW5nQWZ0ZXJSZXNvdXJjZUNyZWF0aW9uKHJvbGVOYW1lKTtcbiAgfVxufVxuIl19